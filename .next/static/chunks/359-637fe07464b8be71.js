"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[359],{3913:function(e,t,a){a.d(t,{CO:function(){return c},Xw:function(){return d},f1:function(){return i},jc:function(){return s},sD:function(){return n}});var r=a(8726);let o="https://lrb-app.grupoerre.pt:3011",n=async e=>{let t=localStorage.getItem("token"),a=await fetch("".concat(o,"/users/by-user-group/editor"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}),r=await a.json();e(null==r?void 0:r.users)},s=async(e,t)=>{let a=localStorage.getItem("token"),n=await fetch("".concat(o,"/auth/update-user-group/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({userGroup:t})});await n.json()&&r.ZP.success("Novo(a) editor(a) adicionado(a)")},i=async e=>{let t=localStorage.getItem("token"),a=await fetch("".concat(o,"/api/tree/create"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({Data:e.Data,Dicofre:e.Dicofre,Localizacao:e.Localizacao,Especie:e.Especie,Nomecomum:e.Nomecomum,Estado_fit:e.Estado_fit,Esdado_cal:e.Esdado_cal,Ava_Risco:e.Ava_Risco,Propo_Inte:e.Propo_Inte,Obser:e.Obser,GlobalID:e.GlobalID,raz_calssifica:e.raz_calssifica,agen_bioticos:e.agen_bioticos,Orgaos_afetados:e.Orgaos_afetados,Grau_de_desfolha:e.Grau_de_desfolha,Sintomas_sinais_desfolhadores:e.Sintomas_sinais_desfolhadores,Grau_de_descoloracao_da_copa:e.Grau_de_descoloracao_da_copa,Deformacao_dos_tecidos:e.Deformacao_dos_tecidos,Alteracao_da_estrutura:e.Alteracao_da_estrutura,Supressao_parcial_dos_orgaos:e.Supressao_parcial_dos_orgaos,Orificios_perfuracoes:e.Orificios_perfuracoes,galerias:e.galerias,necroses:e.necroses,serrim:e.serrim,exsudacao:e.exsudacao,novelos_fibra:e.novelos_fibra,Forma_caldeira:e.Forma_caldeira,Altura_v2:e.Altura_v2,capv2:e.capv2,DAP_v2:e.DAP_v2,idade_apro_v2:e.idade_apro_v2,Especie_Val:e.Especie_Val,Outro_Nome_Comum:e.Outro_Nome_Comum,Outra_Especie:e.Outra_Especie,Codigo:e.Codigo,Outra_Tip_Int:e.Outra_Tip_Int,grupos:e.grupos,POINT_X:e.POINT_X,POINT_Y:e.POINT_Y,POINT_Z:e.POINT_Z})});await a.json()&&r.ZP.success("Arvore criada com sucesso")},d=async(e,t)=>{let a=localStorage.getItem("token"),n=await fetch("".concat(o,"/api/tree/edit/").concat(t),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({tree:e})});await n.json()&&r.ZP.success("Arvore editada com sucesso")},c=async e=>{let t=localStorage.getItem("token"),a=await fetch("".concat(o,"/api/tree/delete/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});await a.json()&&r.ZP.success("Arvore deletada com sucesso")}},1633:function(e,t,a){a.d(t,{Ho:function(){return l},O2:function(){return u}});var r=a(7437),o=a(6463),n=a(2265),s=a(9714);let i=e=>{try{let t=(0,s.o)(e),a=Math.floor(Date.now()/1e3);return t.exp>a}catch(e){return!1}},d=e=>{try{let t=(0,s.o)(e),a=Math.floor(Date.now()/1e3);if(t.exp>a)return{token:t,refreshToken:e}}catch(e){console.error("Failed to decode refresh token:",e)}return null},c=(0,n.createContext)(void 0),l=e=>{let{children:t}=e,[a,l]=(0,n.useState)(!0),[u,f]=(0,n.useState)(!1),[m,p]=(0,n.useState)(null),[b,g]=(0,n.useState)(),[h,_]=(0,n.useState)({userGroup:""}),[x,y]=(0,n.useState)({latitude:0,longitude:0}),[v,N]=(0,n.useState)(!1),[w,j]=(0,n.useState)(),[T,k]=(0,n.useState)(),S=(0,o.useRouter)();return(0,n.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("refreshToken");(async()=>{if(e&&i(e))p(e),_((0,s.o)(e)),f(!0);else if(t){let e=d(t);e?(localStorage.setItem("token",e.token),localStorage.setItem("refreshToken",e.refreshToken),f(!0)):S.push("/sign-in")}else S.push("/sign-in");l(!1)})()},[]),(0,r.jsx)(c.Provider,{value:{authenticated:u,setAuthenticated:f,loading:a,setLoading:l,token:m,setToken:p,editors:b,setEditors:g,userType:h,setUserType:_,latLong:x,setLatLong:y,showDeleteModal:v,setShowDeleteModal:N,treeToDeleteId:w,setTreeToDeleteId:j,dataUpdated:T,setDataUpdated:k},children:t})},u=()=>{let e=(0,n.useContext)(c);if(!e)throw Error("useEvent must be used within an EventProvider");return e}},495:function(e,t,a){a.d(t,{z:function(){return c}});var r=a(7437),o=a(2265),n=a(1538),s=a(2218),i=a(7440);let d=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,t)=>{let{className:a,variant:o,size:s,asChild:c=!1,...l}=e,u=c?n.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(d({variant:o,size:s,className:a})),ref:t,...l})});c.displayName="Button"},6910:function(e,t,a){a.d(t,{$F:function(){return u},AW:function(){return f},Ju:function(){return b},VD:function(){return g},Xi:function(){return m},bO:function(){return p},h_:function(){return l}});var r=a(7437),o=a(2265),n=a(78),s=a(7592),i=a(2468),d=a(8165),c=a(7440);let l=n.fC,u=n.xz;n.ZA,n.Uv,n.Tr,n.Ee,o.forwardRef((e,t)=>{let{className:a,inset:o,children:i,...d}=e;return(0,r.jsxs)(n.fF,{ref:t,className:(0,c.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",o&&"pl-8",a),...d,children:[i,(0,r.jsx)(s.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=n.fF.displayName,o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(n.tu,{ref:t,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})}).displayName=n.tu.displayName;let f=o.forwardRef((e,t)=>{let{className:a,sideOffset:o=4,...s}=e;return(0,r.jsx)(n.Uv,{children:(0,r.jsx)(n.VY,{ref:t,sideOffset:o,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})})});f.displayName=n.VY.displayName;let m=o.forwardRef((e,t)=>{let{className:a,inset:o,...s}=e;return(0,r.jsx)(n.ck,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o&&"pl-8",a),...s})});m.displayName=n.ck.displayName;let p=o.forwardRef((e,t)=>{let{className:a,children:o,checked:s,...d}=e;return(0,r.jsxs)(n.oC,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:s,...d,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})}),o]})});p.displayName=n.oC.displayName,o.forwardRef((e,t)=>{let{className:a,children:o,...s}=e;return(0,r.jsxs)(n.Rk,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...s,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(d.Z,{className:"h-2 w-2 fill-current"})})}),o]})}).displayName=n.Rk.displayName;let b=o.forwardRef((e,t)=>{let{className:a,inset:o,...s}=e;return(0,r.jsx)(n.__,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",o&&"pl-8",a),...s})});b.displayName=n.__.displayName;let g=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(n.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...o})});g.displayName=n.Z0.displayName},3102:function(e,t,a){a.d(t,{I:function(){return s}});var r=a(7437),o=a(2265),n=a(7440);let s=o.forwardRef((e,t)=>{let{className:a,type:o,...s}=e;return(0,r.jsx)("input",{type:o,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...s})});s.displayName="Input"},6975:function(e,t,a){a.d(t,{RM:function(){return d},SC:function(){return c},iA:function(){return s},pj:function(){return u},ss:function(){return l},xD:function(){return i}});var r=a(7437),o=a(2265),n=a(7440);let s=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",a),...o})})});s.displayName="Table";let i=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",a),...o})});i.displayName="TableHeader";let d=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...o})});d.displayName="TableBody",o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...o})}).displayName="TableFooter";let c=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...o})});c.displayName="TableRow";let l=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...o})});l.displayName="TableHead";let u=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...o})});u.displayName="TableCell",o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...o})}).displayName="TableCaption"},7440:function(e,t,a){a.d(t,{cn:function(){return n}});var r=a(4839),o=a(6164);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,o.m6)((0,r.W)(t))}}}]);