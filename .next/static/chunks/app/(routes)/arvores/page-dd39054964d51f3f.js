(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{7112:function(e,s,t){Promise.resolve().then(t.bind(t,762)),Promise.resolve().then(t.bind(t,9759)),Promise.resolve().then(t.bind(t,5956))},762:function(e,s,t){"use strict";t.r(s),t.d(s,{HeaderArvores:function(){return u}});var a=t(7437),r=t(495),l=t(2265),n=t(7138),o=t(1633),i=t(9343),c=t(4697),d=e=>{let{children:s,closeModal:t}=e;return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,a.jsxs)("div",{className:"fixed h-auto w-auto rounded-[20px] bg-white p-10",children:[(0,a.jsx)("button",{onClick:()=>t(!1),className:"absolute right-5 top-5 rounded-[60px] p-2 hover:bg-gray-300",children:(0,a.jsx)(c.Z,{})}),s]})})},x=t(3913),h=e=>{let{treeToDeleteId:s,setShowDeleteModal:t}=e,{handleSubmit:r,formState:{errors:l}}=(0,i.cI)(),n=async e=>{(0,x.CO)(s),t(!1)};return(0,a.jsx)(d,{closeModal:t,children:(0,a.jsxs)("form",{onSubmit:r(n),className:"mt-10 flex h-[150px] w-[300px] flex-col gap-5",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h3",{className:"text-center text-[18px] font-semibold",children:"Tem certeza que quer deletar a \xe1rvore?"})}),(0,a.jsxs)("button",{type:"submit",className:"mt-[25px] h-[40px] w-full rounded-md bg-red-600 text-[18px] font-semibold text-white hover:brightness-75",children:[" ","Deletar"," "]})]})})};function u(){let[e,s]=(0,l.useState)(!1),{userType:t,setShowDeleteModal:i,showDeleteModal:c,treeToDeleteId:d}=(0,o.O2)();return(0,l.useEffect)(()=>{},[t]),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-x-6",children:[c&&(0,a.jsx)(h,{treeToDeleteId:d,setShowDeleteModal:i}),(0,a.jsx)("h2",{className:"text-2xl",children:"Lista das \xc1rvores"}),t&&(null==t?void 0:t.userGroup)!=="user"?(0,a.jsx)(n.default,{href:"/nova-arvore",children:(0,a.jsx)(r.z,{children:"Adicionar \xc1rvore"})}):null]})}},9759:function(e,s,t){"use strict";t.r(s),t.d(s,{ListArvores:function(){return A},default:function(){return F}});var a=t(7437),r=t(2265),l=t(3514),n=t(4175),o=t(6975),i=t(3102),c=t(495),d=t(8604),x=t(3550),h=t(8422),u=t(399),m=t(6900),g=t(6910),f=t(7138),j=t(6648),v=t(3304),p=t(4697),N=t(7440);let y=v.fC,w=v.xz,S=v.h_;v.x8;let b=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(v.aV,{ref:s,className:(0,N.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});b.displayName=v.aV.displayName;let C=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(S,{children:[(0,a.jsx)(b,{}),(0,a.jsxs)(v.VY,{ref:s,className:(0,N.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[r,(0,a.jsxs)(v.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});C.displayName=v.VY.displayName;let k=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,N.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};k.displayName="DialogHeader";let z=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(v.Dx,{ref:s,className:(0,N.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});z.displayName=v.Dx.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(v.dk,{ref:s,className:(0,N.cn)("text-sm text-muted-foreground",t),...r})}).displayName=v.dk.displayName;var I=t(1633),D=t(357);let E=e=>{let{photos:s}=e,[t,l]=(0,r.useState)(null);return(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map((e,s)=>(0,a.jsxs)(y,{children:[(0,a.jsx)(w,{asChild:!0,children:(0,a.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>l("".concat(D.env.BASE_URL,"/").concat(e)),children:[(0,a.jsx)(d.Z,{className:"mr-1 h-4 w-4"}),"Foto ",s+1]})}),(0,a.jsxs)(C,{children:[(0,a.jsx)(k,{children:(0,a.jsxs)(z,{children:["Foto ",s+1]})}),t&&(0,a.jsx)(j.default,{src:t,alt:"Tree Photo",width:600,height:400,className:"mx-auto"})]})]},s))})},Z=[{id:"actions",header:"A\xe7\xf5es",cell:e=>{let{row:s}=e,{_id:t}=s.original,{userType:r,setShowDeleteModal:l,setTreeToDeleteId:n}=(0,I.O2)(),o=()=>{l(!0),n(t)};return(0,a.jsxs)(g.h_,{children:[(0,a.jsx)(g.$F,{asChild:!0,children:(0,a.jsxs)(c.z,{variant:"ghost",className:"h-4 w-8 p-0",children:[(0,a.jsx)("span",{className:"sr-only",children:"Abrir Menu"}),(0,a.jsx)(x.Z,{className:"h-4 w-4"})]})}),(0,a.jsxs)(g.AW,{align:"start",children:[(0,a.jsx)(f.default,{href:"/arvores/".concat(t),children:(0,a.jsxs)(g.Xi,{children:[(0,a.jsx)(h.Z,{className:"mr-2 flex h-4 w-4 items-center justify-center"}),"Editar"]})}),(null==r?void 0:r.userGroup)==="administrator"&&(0,a.jsx)(g.Xi,{children:(0,a.jsxs)("button",{onClick:()=>o(),className:"flex",children:[(0,a.jsx)(u.Z,{className:"mr-2 flex h-4 w-4 items-center justify-center"}),"Deletar"]})})]})]})}},{accessorKey:"_id",header:e=>{let{column:s}=e;return(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(c.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["ID",(0,a.jsx)(m.Z,{className:"ml-2 h-4 w-4"})]})})},cell:e=>{let{row:s}=e;return(0,a.jsx)("span",{children:s.original._id})}},{accessorKey:"GlobalID",header:e=>{let{column:s}=e;return(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(c.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Global ID",(0,a.jsx)(m.Z,{className:"ml-2 h-4 w-4"})]})})}},{accessorKey:"Codigo",header:e=>{let{column:s}=e;return(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(c.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["C\xf3digo",(0,a.jsx)(m.Z,{className:"ml-2 h-4 w-4"})]})})}},{accessorKey:"Fotos",header:()=>(0,a.jsx)("div",{className:"flex justify-center",children:"Fotos"}),cell:e=>{let{row:s}=e,t=s.getValue("Fotos");return(0,a.jsx)(E,{photos:t})}},{accessorKey:"Nomecomum",header:e=>{let{column:s}=e;return(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(c.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Nome Comum",(0,a.jsx)(m.Z,{className:"ml-2 h-4 w-4"})]})})}},{accessorKey:"Especie",header:e=>{let{column:s}=e;return(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(c.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Esp\xe9cie",(0,a.jsx)(m.Z,{className:"ml-2 h-4 w-4"})]})})}},{accessorKey:"Data",header:e=>{let{column:s}=e;return(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(c.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Data",(0,a.jsx)(m.Z,{className:"ml-2 h-4 w-4"})]})})},cell:e=>{let{getValue:s}=e,t=new Date(s());return(0,a.jsx)("span",{children:t.toLocaleDateString("pt-PT")})}},{accessorKey:"Dicofre",header:e=>{let{column:s}=e;return(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(c.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Dicofre",(0,a.jsx)(m.Z,{className:"ml-2 h-4 w-4"})]})})}},{accessorKey:"Localizacao",header:e=>{let{column:s}=e;return(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(c.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Localiza\xe7\xe3o",(0,a.jsx)(m.Z,{className:"ml-2 h-4 w-4"})]})})}},{accessorKey:"Estado_fit",header:e=>{let{column:s}=e;return(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(c.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Estado Fitossanit\xe1rio",(0,a.jsx)(m.Z,{className:"ml-2 h-4 w-4"})]})})}},{accessorKey:"Esdado_cal",header:e=>{let{column:s}=e;return(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(c.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Estado de Conserva\xe7\xe3o",(0,a.jsx)(m.Z,{className:"ml-2 h-4 w-4"})]})})}},{accessorKey:"Ava_Risco",header:e=>{let{column:s}=e;return(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(c.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Avalia\xe7\xe3o de Risco",(0,a.jsx)(m.Z,{className:"ml-2 h-4 w-4"})]})})}},{accessorKey:"Propo_Inte",header:e=>{let{column:s}=e;return(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(c.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Proposta de Interven\xe7\xe3o",(0,a.jsx)(m.Z,{className:"ml-2 h-4 w-4"})]})})}}];var P=e=>{var s;let{trees:t}=e,[d,x]=(0,r.useState)([]),[h,u]=(0,r.useState)(!1),[m,g]=(0,r.useState)([]),[f,j]=(0,r.useState)("");(0,r.useEffect)(()=>{u(!0)},[]);let v=(0,l.b7)({data:t,columns:Z,state:{sorting:d,columnFilters:m,globalFilter:f},onSortingChange:x,onColumnFiltersChange:g,onGlobalFilterChange:j,getCoreRowModel:(0,n.sC)(),getFilteredRowModel:(0,n.vL)(),getPaginationRowModel:(0,n.G_)(),getSortedRowModel:(0,n.tj)()});return h?(0,a.jsxs)("div",{className:"mt-4 rounded-lg bg-background p-4 shadow-md",children:[(0,a.jsx)("div",{className:"mb-3 flex items-center",children:(0,a.jsx)(i.I,{placeholder:"Procurar...",value:null!=f?f:"",onChange:e=>j(String(e.target.value)),className:"max-w-sm"})}),(0,a.jsx)("div",{className:"overflow-x-auto rounded-md border",children:(0,a.jsxs)(o.iA,{className:"min-w-full",children:[(0,a.jsx)(o.xD,{children:v.getHeaderGroups().map(e=>(0,a.jsx)(o.SC,{children:e.headers.map(e=>(0,a.jsx)(o.ss,{children:e.isPlaceholder?null:(0,l.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,a.jsx)(o.RM,{children:(null===(s=v.getRowModel().rows)||void 0===s?void 0:s.length)?v.getRowModel().rows.map(e=>(0,a.jsx)(o.SC,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,a.jsx)(o.pj,{children:(0,l.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)(o.SC,{children:(0,a.jsx)(o.pj,{colSpan:Z.length,className:"h-24 text-center",children:"Nenhum resultado."})})})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,a.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>v.previousPage(),disabled:!v.getCanPreviousPage(),children:"Anterior"}),(0,a.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>v.nextPage(),disabled:!v.getCanNextPage(),children:"Pr\xf3ximo"})]})]}):(0,a.jsx)("div",{children:"Loading..."})},_=t(357);let R=async()=>{try{let e=await fetch("".concat(_.env.BASE_URL,"/api/tree/get-trees/"));if(!e.ok)throw Error("HTTP error! Status: ".concat(e.status));return await e.json()}catch(e){throw console.error("Error fetching data:",e),e}},K=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,N.cn)("w-16 h-16 border-4 border-t-4 border-gray-200 border-t-gray-600 rounded-full animate-spin",t),...r})});K.displayName="LoadingSpinner";let A=()=>{let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{try{let e=await R();s((null==e?void 0:e.trees)||[])}catch(e){console.error("Error fetching trees:",e)}finally{l(!1)}})()},[]),(0,a.jsx)("div",{className:"relative flex min-h-screen items-center justify-center",children:t?(0,a.jsx)(K,{}):(0,a.jsx)("div",{className:"w-full overflow-x-auto",children:(0,a.jsx)(P,{trees:e})})})};var F=A}},function(e){e.O(0,[991,726,138,294,648,715,956,209,613,359,971,23,744],function(){return e(e.s=7112)}),_N_E=e.O()}]);