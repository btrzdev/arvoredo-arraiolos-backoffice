(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[171],{2061:function(e,t,r){Promise.resolve().then(r.bind(r,1998))},1998:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var n=r(7437),s=r(1633);let o=e=>"administrator"===e?"Adminstrador":"editor"===e?"Editor":"user"===e?"User":null;var a=r(9714),i=r(6463),l=r(2265),c=function(){let[e,t]=(0,l.useState)(null),{setAuthenticated:r,authenticated:c}=(0,s.O2)();return(0,l.useEffect)(()=>{let e=localStorage.getItem("token");e&&t((0,a.o)(e)),c||(0,i.redirect)("/sign-in")},[c]),(0,n.jsxs)("div",{className:"profile-page flex flex-col items-center justify-center gap-[20px] md:flex-row md:text-[14px]",children:[(0,n.jsx)("div",{className:"flex flex-col items-center justify-center md:flex-row",children:(0,n.jsx)("img",{className:"h-[100px] w-[100px]",src:"https://ui-avatars.com/api/?name=".concat(null==e?void 0:e.firstName,"+").concat(null==e?void 0:e.lastName),alt:"Profile Avatar"})}),(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,n.jsx)("h1",{className:"text-[26px] font-semibold md:text-[18px]",children:"".concat(null==e?void 0:e.firstName," ").concat(null==e?void 0:e.lastName)}),(0,n.jsxs)("div",{className:"flex items-center gap-[5px] text-[20px]",children:[(0,n.jsx)("span",{className:"font-semibold md:text-[14px]",children:"Email:"})," ",(0,n.jsx)("p",{className:"md:text-[14px]",children:null==e?void 0:e.email})]}),(0,n.jsxs)("div",{className:"flex items-center gap-[5px] text-[20px]",children:[(0,n.jsx)("span",{className:"font-semibold md:text-[14px]",children:"Tipo de Usu\xe1rio:"})," ",(0,n.jsx)("p",{className:"md:text-[14px]",children:o(null==e?void 0:e.userGroup)})]}),(0,n.jsx)("div",{className:"mt-[20px] flex items-center justify-center gap-[5px] text-[20px]",children:(0,n.jsx)("button",{className:"h-[40px] w-[100px] rounded-sm bg-red-500 font-semibold text-white md:h-[25px] md:text-[14px]",onClick:()=>r(!1),children:"Logout"})})]})]})}},1633:function(e,t,r){"use strict";r.d(t,{Ho:function(){return u},O2:function(){return d}});var n=r(7437),s=r(6463),o=r(2265),a=r(9714);let i=e=>{try{let t=(0,a.o)(e),r=Math.floor(Date.now()/1e3);return t.exp>r}catch(e){return!1}},l=e=>{try{let t=(0,a.o)(e),r=Math.floor(Date.now()/1e3);if(t.exp>r)return{token:t,refreshToken:e}}catch(e){console.error("Failed to decode refresh token:",e)}return null},c=(0,o.createContext)(void 0),u=e=>{let{children:t}=e,[r,u]=(0,o.useState)(!0),[d,f]=(0,o.useState)(!1),[x,m]=(0,o.useState)(null),[p,h]=(0,o.useState)(),[g,v]=(0,o.useState)({userGroup:""}),[k,w]=(0,o.useState)({latitude:0,longitude:0}),[N,j]=(0,o.useState)(!1),[b,S]=(0,o.useState)(),[y,E]=(0,o.useState)(),I=(0,s.useRouter)();return(0,o.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("refreshToken");(async()=>{if(e&&i(e))m(e),v((0,a.o)(e)),f(!0);else if(t){let e=l(t);e?(localStorage.setItem("token",e.token),localStorage.setItem("refreshToken",e.refreshToken),f(!0)):I.push("/sign-in")}else I.push("/sign-in");u(!1)})()},[]),(0,n.jsx)(c.Provider,{value:{authenticated:d,setAuthenticated:f,loading:r,setLoading:u,token:x,setToken:m,editors:p,setEditors:h,userType:g,setUserType:v,latLong:k,setLatLong:w,showDeleteModal:N,setShowDeleteModal:j,treeToDeleteId:b,setTreeToDeleteId:S,dataUpdated:y,setDataUpdated:E},children:t})},d=()=>{let e=(0,o.useContext)(c);if(!e)throw Error("useEvent must be used within an EventProvider");return e}},6463:function(e,t,r){"use strict";var n=r(1169);r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},9714:function(e,t,r){"use strict";r.d(t,{o:function(){return s}});class n extends Error{}function s(e,t){let r;if("string"!=typeof e)throw new n("Invalid token specified: must be a string");t||(t={});let s=!0===t.header?0:1,o=e.split(".")[s];if("string"!=typeof o)throw new n(`Invalid token specified: missing part #${s+1}`);try{r=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var r;return r=t,decodeURIComponent(atob(r).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}catch(e){return atob(t)}}(o)}catch(e){throw new n(`Invalid token specified: invalid base64 for part #${s+1} (${e.message})`)}try{return JSON.parse(r)}catch(e){throw new n(`Invalid token specified: invalid json for part #${s+1} (${e.message})`)}}n.prototype.name="InvalidTokenError"}},function(e){e.O(0,[971,23,744],function(){return e(e.s=2061)}),_N_E=e.O()}]);