(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{5279:function(e,t,s){Promise.resolve().then(s.bind(s,795))},795:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return I}});var l=s(7437),r=s(8030);function a(e){let{icon:t}=e;return(0,l.jsx)("div",{className:"rounded-lg bg-slate-400/20 p-2",children:(0,l.jsx)(t,{strokeWidth:1,className:"h-4 w-4"})})}(0,r.Z)("Trees",[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]]),(0,r.Z)("Waypoints",[["circle",{cx:"12",cy:"4.5",r:"2.5",key:"r5ysbb"}],["path",{d:"m10.2 6.3-3.9 3.9",key:"1nzqf6"}],["circle",{cx:"4.5",cy:"12",r:"2.5",key:"jydg6v"}],["path",{d:"M7 12h10",key:"b7w52i"}],["circle",{cx:"19.5",cy:"12",r:"2.5",key:"1piiel"}],["path",{d:"m13.8 17.7 3.9-3.9",key:"1wyg1y"}],["circle",{cx:"12",cy:"19.5",r:"2.5",key:"13o1pw"}]]),(0,r.Z)("BookOpenCheck",[["path",{d:"M8 3H2v15h7c1.7 0 3 1.3 3 3V7c0-2.2-1.8-4-4-4Z",key:"1i8u0n"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V3h-6c-2.2 0-4 1.8-4 4v14c0-1.7 1.3-3 3-3h7v-2.3",key:"jb5l51"}]]);/**
 * @license lucide-react v0.397.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r.Z)("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);var i=s(2265),c=s(3514),o=s(4175),d=s(6900),h=s(3550);/**
 * @license lucide-react v0.397.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,r.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var x=s(495),m=s(6910),g=s(3102),j=s(6975),p=s(7138),v=s(8889);let f=e=>"pending"===e?"Pendente":"canceled"===e?"Cancelado":"approved"===e?"Resolvido":null,y=e=>"treeId"===e?"\xc1rvore ID":"comments"===e?"Coment\xe1rios":"createdAt"===e?"Data de Cria\xe7\xe3o":"updatedAt"===e?"Data de Atualiza\xe7\xe3o":e;function C(e){var t,s,r;let{allOccurrences:a,setAllOccurrences:n}=e,C=[{id:"select",enableSorting:!1,enableHiding:!1},{accessorKey:"status",header:"Status",cell:e=>{let{row:t}=e;return(0,l.jsx)("div",{className:"capitalize",children:f(t.getValue("status"))})}},{accessorKey:"treeId",header:e=>{let{column:t}=e;return(0,l.jsxs)(x.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["\xc1rvore Id",(0,l.jsx)(d.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,l.jsx)("div",{className:"lowercase",children:t.getValue("treeId")})}},{accessorKey:"email",header:e=>{let{column:t}=e;return(0,l.jsxs)(x.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Email",(0,l.jsx)(d.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,l.jsx)("div",{className:"lowercase",children:t.getValue("email")})}},{accessorKey:"comments",header:e=>{let{column:t}=e;return(0,l.jsxs)(x.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Comments",(0,l.jsx)(d.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,l.jsx)("div",{className:"lowercase",children:t.getValue("comments")})}},{accessorKey:"createdAt",header:e=>{let{column:t}=e;return(0,l.jsxs)(x.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Data de Cria\xe7\xe3o",(0,l.jsx)(d.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,l.jsx)("div",{className:"flex items-center justify-center lowercase",children:new Date(t.getValue("createdAt")).toLocaleDateString()})}},{accessorKey:"updatedAt",header:e=>{let{column:t}=e;return(0,l.jsxs)(x.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Data de Atualiza\xe7\xe3o",(0,l.jsx)(d.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,l.jsx)("div",{className:"flex items-center justify-center lowercase",children:new Date(t.getValue("updatedAt")).toLocaleDateString()})}},{id:"actions",header:e=>{let{column:t}=e;return(0,l.jsx)("span",{children:"A\xe7\xf5es"})},enableHiding:!1,cell:e=>{let{row:t}=e,s=t.original,r=t.original;return(0,l.jsxs)(m.h_,{children:[(0,l.jsx)(m.$F,{asChild:!0,children:(0,l.jsxs)(x.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,l.jsx)("span",{className:"sr-only",children:"Abrir Menu"}),(0,l.jsx)(h.Z,{className:"h-4 w-4"})]})}),(0,l.jsxs)(m.AW,{align:"end",children:[(0,l.jsx)(m.Ju,{children:"A\xe7\xf5es"}),(0,l.jsx)(m.Xi,{className:"hover:cursor-pointer",onClick:()=>navigator.clipboard.writeText(s.treeId),children:"Copiar ID"}),(0,l.jsx)(m.VD,{}),(0,l.jsx)(m.Xi,{children:(0,l.jsx)(p.default,{href:"/arvore/".concat(s.treeId),children:"Ver \xc1rvore"})}),(0,l.jsx)(m.Xi,{children:(0,l.jsx)(x.z,{variant:"destructive",onClick:()=>{(0,v.Rt)(r,"canceled",r._id,n)},children:"Cancelar Ocorr\xeancia"})}),(0,l.jsx)(m.Xi,{children:(0,l.jsx)(x.z,{onClick:()=>(0,v.Rt)(r,"approved",r._id,n),children:"Resolver Ocorr\xeancia"})})]})]})}}],[b,N]=i.useState([]),[w,k]=i.useState([]),[S,A]=i.useState({}),[z,D]=i.useState({}),I=i.useMemo(()=>a,[a]),M=(0,c.b7)({data:null!=I?I:[],columns:C,onSortingChange:N,onColumnFiltersChange:k,getCoreRowModel:(0,o.sC)(),getPaginationRowModel:(0,o.G_)(),getSortedRowModel:(0,o.tj)(),getFilteredRowModel:(0,o.vL)(),onColumnVisibilityChange:A,onRowSelectionChange:D,state:{sorting:b,columnFilters:w,columnVisibility:S,rowSelection:z}});return void 0===a?(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("div",{className:"loader"})}):(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsxs)("div",{className:"flex items-center py-4",children:[(0,l.jsx)(g.I,{placeholder:"Procurar...",value:null!==(r=null===(t=M.getColumn("_id"))||void 0===t?void 0:t.getFilterValue())&&void 0!==r?r:"",onChange:e=>{var t;return null===(t=M.getColumn("_id"))||void 0===t?void 0:t.setFilterValue(e.target.value)},className:"max-w-sm"}),(0,l.jsxs)(m.h_,{children:[(0,l.jsx)(m.$F,{asChild:!0,children:(0,l.jsxs)(x.z,{variant:"outline",className:"ml-auto",children:["Filtro ",(0,l.jsx)(u,{className:"ml-2 h-4 w-4"})]})}),(0,l.jsx)(m.AW,{align:"end",children:M.getAllColumns().filter(e=>e.getCanHide()).map(e=>(0,l.jsx)(m.bO,{className:"capitalize",checked:e.getIsVisible(),onCheckedChange:t=>e.toggleVisibility(!!t),children:y(e.id)},e.id))})]})]}),(0,l.jsx)("div",{className:"rounded-md border",children:(0,l.jsxs)(j.iA,{children:[(0,l.jsx)(j.xD,{children:M.getHeaderGroups().map(e=>(0,l.jsx)(j.SC,{children:e.headers.map(e=>(0,l.jsx)(j.ss,{children:e.isPlaceholder?null:(0,c.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,l.jsx)(j.RM,{children:(null===(s=M.getRowModel().rows)||void 0===s?void 0:s.length)?M.getRowModel().rows.map(e=>(0,l.jsx)(j.SC,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,l.jsx)(j.pj,{children:(0,c.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,l.jsx)(j.SC,{children:(0,l.jsx)(j.pj,{colSpan:C.length,className:"h-24 text-center",children:"No results."})})})]})}),(0,l.jsx)("div",{className:"flex items-center justify-end space-x-2 py-4",children:(0,l.jsxs)("div",{className:"space-x-2",children:[(0,l.jsx)(x.z,{variant:"outline",size:"sm",onClick:()=>M.previousPage(),disabled:!M.getCanPreviousPage(),children:"Anterior"}),(0,l.jsx)(x.z,{variant:"outline",size:"sm",onClick:()=>M.nextPage(),disabled:!M.getCanNextPage(),children:"Pr\xf3ximo"})]})})]})}var b=s(4126);function N(){let{allOccurrences:e,setAllOccurrences:t}=(0,b.hp)();return(0,i.useEffect)(()=>{console.log("All occurrences",e)},[e]),(0,l.jsxs)("div",{className:"rounded-lg bg-background p-5 shadow-sm",children:[(0,l.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,l.jsx)(a,{icon:n}),(0,l.jsx)("p",{className:"text-xl",children:"Ocorr\xeancias"})]}),(0,l.jsx)("div",{children:(0,l.jsx)(C,{allOccurrences:e,setAllOccurrences:t})})]})}var w=s(3913),k=s(1633);/**
 * @license lucide-react v0.397.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let S=(0,r.Z)("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);var A=s(9343);function z(){let{token:e,setEditors:t,userType:s,editors:r}=(0,k.O2)();(0,i.useEffect)(()=>{e&&(0,w.sD)(t)},[e,t]);let{handleSubmit:n,register:c,reset:o}=(0,A.cI)({}),d=e=>{(0,w.jc)(e,"user"),(0,w.sD)(t)};return(0,l.jsxs)("div",{className:"flex flex-col rounded-lg bg-background p-5 shadow-sm",children:[(0,l.jsx)("div",{className:"items-centerflex-col flex gap-x-2",children:(0,l.jsxs)("div",{className:"flex gap-[5px]",children:[(0,l.jsx)(a,{icon:S}),(0,l.jsx)("p",{className:"text-xl",children:"Editores"})]})}),s&&"administrator"===s.userGroup?(0,l.jsxs)("form",{className:"mt-[10px] flex items-center gap-[10px]",onSubmit:n(e=>{o(),(0,w.jc)(e.editor,"editor"),(0,w.sD)(t)}),children:[(0,l.jsx)("input",{...c("editor"),name:"editor",className:"mt-1 block w-[70%] rounded-sm border border-slate-300 bg-white px-3 py-2 text-sm placeholder-slate-400 shadow-sm focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"}),(0,l.jsx)("button",{type:"submit",className:"h-[40px] w-[150px] rounded bg-gray-700 text-sm font-semibold text-white hover:brightness-50",children:"Adicionar editor +"})]}):null,(0,l.jsx)("h3",{className:"mt-[20px] font-semibold",children:"Editores"}),null==r?void 0:r.map((e,t)=>(0,l.jsxs)("div",{className:"inline-block flex items-center justify-between bg-gray-200 px-[10px]",children:[(0,l.jsx)("p",{className:"mt-[5px] p-[10px]",children:e.email}),(0,l.jsx)("button",{className:"h-[35px] w-[100px] rounded bg-red-500 text-sm font-semibold text-white hover:brightness-50",onClick:()=>d(e.email),children:"Remover"})]},e.email))]})}var D=s(5956);function I(){let{allOccurrences:e,setAllOccurrences:t}=(0,b.hp)();return(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"mb-4 text-2xl",children:"Dashboard"}),(0,l.jsxs)("div",{className:"mt-12 grid grid-cols-1 md:gap-x-10 xl:grid-cols-2",children:[(0,l.jsx)(N,{}),(0,l.jsx)(z,{}),(0,l.jsx)(D.ToastContainer,{})]})]})}s(4193)},8889:function(e,t,s){"use strict";s.d(t,{P3:function(){return n},Rt:function(){return a}});var l=s(5956);let r="https://app.grupoerre.pt:5258",a=async(e,t,s,a)=>{let i=localStorage.getItem("token"),c=await fetch("".concat(r,"/api/occurrences/edit/").concat(s),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},body:JSON.stringify({name:e.name,email:e.email,comments:e.comments,imgUrl:e.imgUrl,status:t})}),o=await c.json();"Occurence successfully edited"===o.message&&l.Am.success("Ocorr\xeancia editada com sucesso"),n(a),console.log("Editar ocurrence",o)},n=async e=>{let t=localStorage.getItem("token"),s=await fetch("".concat(r,"/api/occurrences/get-all"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}),l=await s.json();e(l.occurences),console.log("Occurrences fetched",l)}},4126:function(e,t,s){"use strict";s.d(t,{db:function(){return i},hp:function(){return c}});var l=s(7437),r=s(2265),a=s(8889);let n=(0,r.createContext)(void 0),i=e=>{let{children:t}=e,[s,i]=(0,r.useState)();return(0,r.useEffect)(()=>{(0,a.P3)(i)},[]),(0,l.jsx)(n.Provider,{value:{allOccurrences:s,setAllOccurrences:i},children:t})},c=()=>{let e=(0,r.useContext)(n);if(!e)throw Error("useEvent must be used within an EventProvider");return e}},4193:function(){}},function(e){e.O(0,[143,991,726,138,294,715,956,209,359,971,23,744],function(){return e(e.s=5279)}),_N_E=e.O()}]);