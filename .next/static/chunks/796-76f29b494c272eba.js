"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[796],{4796:function(e,r,t){t.r(r),t.d(r,{ArvoreForm:function(){return E}});var o=t(7437),n=t(1014),s=t(9343),a=t(495),l=t(2265),i=t(1538),c=t(7440),d=t(7135);let u=s.RV,x=l.createContext({}),j=e=>{let{...r}=e;return(0,o.jsx)(x.Provider,{value:{name:r.name},children:(0,o.jsx)(s.Qr,{...r})})},p=()=>{let e=l.useContext(x),r=l.useContext(h),{getFieldState:t,formState:o}=(0,s.Gc)(),n=t(e.name,o);if(!e)throw Error("useFormField should be used within <FormField>");let{id:a}=r;return{id:a,name:e.name,formItemId:"".concat(a,"-form-item"),formDescriptionId:"".concat(a,"-form-item-description"),formMessageId:"".concat(a,"-form-item-message"),...n}},h=l.createContext({}),m=l.forwardRef((e,r)=>{let{className:t,...n}=e,s=l.useId();return(0,o.jsx)(h.Provider,{value:{id:s},children:(0,o.jsx)("div",{ref:r,className:(0,c.cn)("space-y-2",t),...n})})});m.displayName="FormItem";let f=l.forwardRef((e,r)=>{let{className:t,...n}=e,{error:s,formItemId:a}=p();return(0,o.jsx)(d._,{ref:r,className:(0,c.cn)(s&&"text-destructive",t),htmlFor:a,...n})});f.displayName="FormLabel";let g=l.forwardRef((e,r)=>{let{...t}=e,{error:n,formItemId:s,formDescriptionId:a,formMessageId:l}=p();return(0,o.jsx)(i.g7,{ref:r,id:s,"aria-describedby":n?"".concat(a," ").concat(l):"".concat(a),"aria-invalid":!!n,...t})});g.displayName="FormControl",l.forwardRef((e,r)=>{let{className:t,...n}=e,{formDescriptionId:s}=p();return(0,o.jsx)("p",{ref:r,id:s,className:(0,c.cn)("text-sm text-muted-foreground",t),...n})}).displayName="FormDescription";let _=l.forwardRef((e,r)=>{let{className:t,children:n,...s}=e,{error:a,formMessageId:l}=p(),i=a?String(null==a?void 0:a.message):n;return i?(0,o.jsx)("p",{ref:r,id:l,className:(0,c.cn)("text-sm font-medium text-destructive",t),...s,children:i}):null});_.displayName="FormMessage";var I=t(3102);let v=l.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,o.jsx)("textarea",{className:(0,c.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n})});v.displayName="Textarea";var b=t(9772);let z=b.z.object({_id:b.z.string().optional(),Data:b.z.string().optional(),Dicofre:b.z.string().optional(),Localizacao:b.z.string().optional(),Especie:b.z.string(),Nomecomum:b.z.string(),Estado_fit:b.z.string(),Esdado_cal:b.z.string(),Ava_Risco:b.z.string().optional(),Propo_Inte:b.z.string().optional(),Obser:b.z.string().optional(),GlobalID:b.z.string().optional(),raz_calssifica:b.z.string().optional(),agen_bioticos:b.z.string().optional(),Orgaos_afetados:b.z.string().optional(),Grau_de_desfolha:b.z.string().optional(),Sintomas_sinais_desfolhadores:b.z.string().optional(),Grau_de_descoloracao_da_copa:b.z.string().optional(),Deformacao_dos_tecidos:b.z.string().optional(),Alteracao_da_estrutura:b.z.string().optional(),Supressao_parcial_dos_orgaos:b.z.string().optional(),Orificios_perfuracoes:b.z.string().optional(),galerias:b.z.string().optional(),necroses:b.z.string().optional(),serrim:b.z.string().optional(),exsudacao:b.z.string().optional(),novelos_fibra:b.z.string().optional(),Forma_caldeira:b.z.string().optional(),Altura_v2:b.z.string().optional(),capv2:b.z.string().optional(),DAP_v2:b.z.string().optional(),idade_apro_v2:b.z.string().optional(),Especie_Val:b.z.string().optional(),Outro_Nome_Comum:b.z.string().optional(),Outra_Especie:b.z.string().optional(),Codigo:b.z.string().optional(),Outra_Tip_Int:b.z.string().optional(),grupos:b.z.string().optional(),POINT_X:b.z.string().optional(),POINT_Y:b.z.string().optional(),POINT_Z:b.z.string().optional(),Fotos:b.z.array(b.z.string()).optional(),createdAt:b.z.string().optional(),updatedAt:b.z.string().optional()});var y=t(6463),N=t(1819),w=t(3991);t(9360);var O=t(9321),S=e=>{let{setLatLong:r}=e,n=t.e(415).then(t.t.bind(t,7719,23)),[s,a]=(0,l.useState)({latitude:38.723221,longitude:-7.986761,zoom:14}),[i,c]=(0,l.useState)({latitude:38.723221,longitude:-7.986761});(0,l.useEffect)(()=>{navigator.geolocation.getCurrentPosition(e=>{a(r=>({...r,latitude:e.coords.latitude,longitude:e.coords.longitude,zoom:14})),c({latitude:e.coords.latitude,longitude:e.coords.longitude})})},[]);let d=(0,l.useCallback)(e=>{a(e.viewState)},[]),u=(0,l.useCallback)(e=>{let t={latitude:e.lngLat.lat,longitude:e.lngLat.lng};c(t),r(t)},[r]);return(0,o.jsx)("div",{className:"flex items-center justify-center",children:(0,o.jsx)(w.ZP,{mapboxAccessToken:"pk.eyJ1IjoiZGF2aWRjYWxob3VuIiwiYSI6ImNraXlxaW8wMTB4MXIyeG02aDZzbnBxcmkifQ.OOxFfzUTBphTe1wEZqhjnw",mapLib:n,...s,onMove:d,style:{width:"100%",height:"400px"},mapStyle:"mapbox://styles/mapbox/satellite-streets-v12",onClick:u,children:(0,o.jsx)(w.Jx,{longitude:i.longitude,latitude:i.latitude,children:(0,o.jsx)(O.Z,{size:50,fill:"true",color:"red"})})})})},D=t(1633),C=t(3913);function E(e){let{arvore:r,type:t}=e;(0,y.useRouter)();let[i,c]=(0,l.useState)(null),[d,x]=(0,l.useState)(!1),[p,h]=(0,l.useState)(""),{setLatLong:b,latLong:w}=(0,D.O2)(),O=(0,s.cI)({resolver:(0,n.F)(z),defaultValues:{...r}});(0,l.useEffect)(()=>{"create"===t&&(O.setValue("POINT_X",String(w.longitude)),O.setValue("POINT_Y",String(w.latitude)))},[w]);let E=async e=>{(0,C.f1)(e)},A=async e=>{(0,C.Xw)(e,String(e._id))},T=e=>new Date(e).toLocaleString("pt-PT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return(0,l.useEffect)(()=>{h(new Date().toLocaleString("pt-PT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}))},[]),(0,o.jsx)("div",{children:(0,o.jsx)(u,{...O,children:(0,o.jsxs)("form",{onSubmit:"create"===t?O.handleSubmit(E):O.handleSubmit(A),className:"space-y-8",children:[(0,o.jsx)("div",{children:"create"===t?(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsx)(S,{setLatLong:b}),(0,o.jsxs)("div",{className:"flex w-[40%] gap-[20px]",children:[(0,o.jsxs)("span",{className:"font-semibold",children:["Longitude:"," ",(0,o.jsx)("span",{className:"font-normal",children:w.longitude})]}),(0,o.jsxs)("span",{className:"font-semibold",children:["Latitude:"," ",(0,o.jsx)("span",{className:"font-normal",children:w.latitude})]})]})]}):null}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsx)(j,{control:O.control,name:"_id",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"ID"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r,disabled:!0})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Data",render:e=>{let{field:r}=e;return(0,o.jsx)(m,{children:(0,o.jsxs)("div",{className:"ml-4 mt-10",children:[(0,o.jsx)(f,{children:"Data: "}),(0,o.jsx)(g,{children:(0,o.jsx)("span",{children:p})}),(0,o.jsx)(_,{})]})})}}),(0,o.jsx)(j,{control:O.control,name:"Localizacao",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Localiza\xe7\xe3o"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Especie",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Esp\xe9cie"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Nomecomum",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Nome Comum"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Estado_fit",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Estado Fitossanit\xe1rio"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Esdado_cal",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Estado da Caldeira"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Ava_Risco",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Avalia\xe7\xe3o de Risco"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Propo_Inte",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Proposta de Interven\xe7\xe3o"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,o.jsx)(j,{control:O.control,name:"Obser",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Observa\xe7\xe3o"}),(0,o.jsx)(g,{children:(0,o.jsx)(v,{placeholder:"Introduza...",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"GlobalID",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Global ID"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"raz_calssifica",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Raz\xe3o de Classifica\xe7\xe3o"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"agen_bioticos",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Agentes Bi\xf3ticos"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Orgaos_afetados",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"\xd3rg\xe3os Afetados"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Grau_de_desfolha",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Grau de Desfolha"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Sintomas_sinais_desfolhadores",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Sintomas/Sinais de Desfolhadores"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Grau_de_descoloracao_da_copa",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Grau de Descolora\xe7\xe3o da Copa"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Deformacao_dos_tecidos",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Deforma\xe7\xe3o dos Tecidos"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Alteracao_da_estrutura",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Altera\xe7\xe3o da Estrutura"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Supressao_parcial_dos_orgaos",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Supress\xe3o Parcial dos \xd3rg\xe3os"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Orificios_perfuracoes",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Orif\xedcios/Perfura\xe7\xf5es"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"galerias",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Galerias"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"necroses",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Necroses"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"serrim",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Serrim"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"exsudacao",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Exsuda\xe7\xe3o"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"novelos_fibra",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Novelos de Fibra"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Forma_caldeira",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Forma da Caldeira"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Altura_v2",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Altura"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"number",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"capv2",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Cap"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"DAP_v2",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"DAP"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"number",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"idade_apro_v2",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Idade Aproximada"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Especie_Val",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Esp\xe9cie Val"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"number",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Outro_Nome_Comum",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Outro Nome Comum"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Outra_Especie",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Outra Esp\xe9cie"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Codigo",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"C\xf3digo"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Gerado Automaticamente",type:"text",...r,disabled:!0})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Outra_Tip_Int",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Outra Tip. Int."}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"grupos",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Grupos"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"POINT_X",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Coordenada X"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"POINT_Y",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Coordenada Y"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"POINT_Z",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Coordenada Z"}),(0,o.jsx)(g,{children:(0,o.jsx)(I.I,{placeholder:"Introduza...",type:"text",...r})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"Fotos",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Fotos"}),(0,o.jsx)(g,{children:(0,o.jsx)(N.default,{})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"createdAt",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Data de Cria\xe7\xe3o: "}),(0,o.jsx)(g,{children:(0,o.jsx)("span",{children:r.value?T(r.value):"Data n\xe3o dispon\xedvel"})}),(0,o.jsx)(_,{})]})}}),(0,o.jsx)(j,{control:O.control,name:"updatedAt",render:e=>{let{field:r}=e;return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{children:"Data de Atualiza\xe7\xe3o: "}),(0,o.jsx)(g,{children:(0,o.jsx)("span",{children:r.value?T(r.value):"Data n\xe3o dispon\xedvel"})}),(0,o.jsx)(_,{})]})}})]}),(0,o.jsx)(a.z,{type:"submit",children:"Gravar altera\xe7\xf5es"})]})})})}},1819:function(e,r,t){t.r(r),t.d(r,{default:function(){return s}});var o=t(7437),n=t(2265);function s(){let[e,r]=(0,n.useState)(),[t,s]=(0,n.useState)(!1);return(0,o.jsx)("div",{className:"container mx-auto max-w-5xl px-4",children:e?(0,o.jsxs)("div",{className:"flex flex-col items-center",children:[(0,o.jsx)("object",{className:"h-full w-full max-w-xs rounded-md",data:e,type:"image/png"}),(0,o.jsx)("button",{onClick:()=>r(""),className:"mt-10 rounded bg-red-600 px-4 py-2 uppercase tracking-widest text-white outline-none",children:"Adicionar"}),(0,o.jsx)("button",{onClick:()=>r(""),className:"mt-2 rounded bg-red-600 px-4 py-2 uppercase tracking-widest text-white outline-none",children:"Reset"})]}):(0,o.jsxs)("div",{onDragOver:e=>{e.preventDefault(),s(!0)},onDragLeave:e=>{s(!1)},onDragEnd:e=>{e.preventDefault(),s(!1)},onDrop:e=>{e.preventDefault(),s(!1),e.dataTransfer.items?[...e.dataTransfer.items].forEach((e,t)=>{if("file"===e.kind){let t=e.getAsFile();t&&r(URL.createObjectURL(t))}}):[...e.dataTransfer.files].forEach((e,r)=>{})},className:"".concat(t?"border-4":"border-2"," flex h-32 w-64 max-w-xs flex-col justify-center border-dashed bg-white/60"),children:[(0,o.jsx)("label",{htmlFor:"file",className:"flex h-full flex-col justify-center text-center text-black",children:"Clique para fazer upload, ou arraste foto"}),(0,o.jsx)("input",{id:"file",type:"file",className:"hidden",onChange:e=>{let t=e.target.files;t&&t[0]&&r(URL.createObjectURL(t[0]))}})]})})}},3913:function(e,r,t){t.d(r,{CO:function(){return c},Xw:function(){return i},f1:function(){return l},jc:function(){return a},sD:function(){return s}});var o=t(8726);let n="https://app.grupoerre.pt:5258",s=async e=>{let r=localStorage.getItem("token"),t=await fetch("".concat(n,"/users/by-user-group/editor"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}}),o=await t.json();e(null==o?void 0:o.users)},a=async(e,r)=>{let t=localStorage.getItem("token"),s=await fetch("".concat(n,"/auth/update-user-group/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userGroup:r})});await s.json()&&o.ZP.success("Novo(a) editor(a) adicionado(a)")},l=async e=>{let r=localStorage.getItem("token"),t=await fetch("".concat(n,"/api/tree/create"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({Data:e.Data,Dicofre:e.Dicofre,Localizacao:e.Localizacao,Especie:e.Especie,Nomecomum:e.Nomecomum,Estado_fit:e.Estado_fit,Esdado_cal:e.Esdado_cal,Ava_Risco:e.Ava_Risco,Propo_Inte:e.Propo_Inte,Obser:e.Obser,GlobalID:e.GlobalID,raz_calssifica:e.raz_calssifica,agen_bioticos:e.agen_bioticos,Orgaos_afetados:e.Orgaos_afetados,Grau_de_desfolha:e.Grau_de_desfolha,Sintomas_sinais_desfolhadores:e.Sintomas_sinais_desfolhadores,Grau_de_descoloracao_da_copa:e.Grau_de_descoloracao_da_copa,Deformacao_dos_tecidos:e.Deformacao_dos_tecidos,Alteracao_da_estrutura:e.Alteracao_da_estrutura,Supressao_parcial_dos_orgaos:e.Supressao_parcial_dos_orgaos,Orificios_perfuracoes:e.Orificios_perfuracoes,galerias:e.galerias,necroses:e.necroses,serrim:e.serrim,exsudacao:e.exsudacao,novelos_fibra:e.novelos_fibra,Forma_caldeira:e.Forma_caldeira,Altura_v2:e.Altura_v2,capv2:e.capv2,DAP_v2:e.DAP_v2,idade_apro_v2:e.idade_apro_v2,Especie_Val:e.Especie_Val,Outro_Nome_Comum:e.Outro_Nome_Comum,Outra_Especie:e.Outra_Especie,Codigo:e.Codigo,Outra_Tip_Int:e.Outra_Tip_Int,grupos:e.grupos,POINT_X:e.POINT_X,POINT_Y:e.POINT_Y,POINT_Z:e.POINT_Z})});await t.json()&&o.ZP.success("Arvore criada com sucesso")},i=async(e,r)=>{let t=localStorage.getItem("token"),s=await fetch("".concat(n,"/api/tree/edit/").concat(r),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({tree:e})});await s.json()&&o.ZP.success("Arvore editada com sucesso")},c=async e=>{let r=localStorage.getItem("token"),t=await fetch("".concat(n,"/api/tree/delete/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});await t.json()&&o.ZP.success("Arvore deletada com sucesso")}},1633:function(e,r,t){t.d(r,{Ho:function(){return d},O2:function(){return u}});var o=t(7437),n=t(6463),s=t(2265),a=t(9714);let l=e=>{try{let r=(0,a.o)(e),t=Math.floor(Date.now()/1e3);return r.exp>t}catch(e){return!1}},i=e=>{try{let r=(0,a.o)(e),t=Math.floor(Date.now()/1e3);if(r.exp>t)return{token:r,refreshToken:e}}catch(e){console.error("Failed to decode refresh token:",e)}return null},c=(0,s.createContext)(void 0),d=e=>{let{children:r}=e,[t,d]=(0,s.useState)(!0),[u,x]=(0,s.useState)(!1),[j,p]=(0,s.useState)(null),[h,m]=(0,s.useState)(),[f,g]=(0,s.useState)({userGroup:""}),[_,I]=(0,s.useState)({latitude:0,longitude:0}),[v,b]=(0,s.useState)(!1),[z,y]=(0,s.useState)(),[N,w]=(0,s.useState)(),O=(0,n.useRouter)();return(0,s.useEffect)(()=>{let e=localStorage.getItem("token"),r=localStorage.getItem("refreshToken");(async()=>{if(e&&l(e))p(e),g((0,a.o)(e)),x(!0);else if(r){let e=i(r);e?(localStorage.setItem("token",e.token),localStorage.setItem("refreshToken",e.refreshToken),x(!0)):O.push("/sign-in")}else O.push("/sign-in");d(!1)})()},[]),(0,o.jsx)(c.Provider,{value:{authenticated:u,setAuthenticated:x,loading:t,setLoading:d,token:j,setToken:p,editors:h,setEditors:m,userType:f,setUserType:g,latLong:_,setLatLong:I,showDeleteModal:v,setShowDeleteModal:b,treeToDeleteId:z,setTreeToDeleteId:y,dataUpdated:N,setDataUpdated:w},children:r})},u=()=>{let e=(0,s.useContext)(c);if(!e)throw Error("useEvent must be used within an EventProvider");return e}},495:function(e,r,t){t.d(r,{z:function(){return c}});var o=t(7437),n=t(2265),s=t(1538),a=t(2218),l=t(7440);let i=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,r)=>{let{className:t,variant:n,size:a,asChild:c=!1,...d}=e,u=c?s.g7:"button";return(0,o.jsx)(u,{className:(0,l.cn)(i({variant:n,size:a,className:t})),ref:r,...d})});c.displayName="Button"},3102:function(e,r,t){t.d(r,{I:function(){return a}});var o=t(7437),n=t(2265),s=t(7440);let a=n.forwardRef((e,r)=>{let{className:t,type:n,...a}=e;return(0,o.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...a})});a.displayName="Input"},7135:function(e,r,t){t.d(r,{_:function(){return c}});var o=t(7437),n=t(2265),s=t(8364),a=t(2218),l=t(7440);let i=(0,a.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,o.jsx)(s.f,{ref:r,className:(0,l.cn)(i(),t),...n})});c.displayName=s.f.displayName},7440:function(e,r,t){t.d(r,{cn:function(){return s}});var o=t(4839),n=t(6164);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.m6)((0,o.W)(r))}}}]);