(()=>{var e={};e.id=658,e.ids=[658],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},5524:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>d}),r(4539),r(611),r(5866),r(1506);var o=r(3191),s=r(8716),a=r(7922),n=r.n(a),i=r(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["(auth)",{children:["(routes)",{children:["sign-in",{children:["[[...sign-in]]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4539)),"/home/bsilva/Code/arvoredo_arraiolos/arvoredo-arraiolos-backoffice/app/(auth)/(routes)/sign-in/[[...sign-in]]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,611)),"/home/bsilva/Code/arvoredo_arraiolos/arvoredo-arraiolos-backoffice/app/(auth)/(routes)/layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,5080))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1506)),"/home/bsilva/Code/arvoredo_arraiolos/arvoredo-arraiolos-backoffice/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,5080))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/home/bsilva/Code/arvoredo_arraiolos/arvoredo-arraiolos-backoffice/app/(auth)/(routes)/sign-in/[[...sign-in]]/page.tsx"],u="/(auth)/(routes)/sign-in/[[...sign-in]]/page",m={require:r,loadChunk:()=>Promise.resolve()},f=new o.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(auth)/(routes)/sign-in/[[...sign-in]]/page",pathname:"/sign-in/[[...sign-in]]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6506:(e,t,r)=>{Promise.resolve().then(r.bind(r,2827))},7170:(e,t,r)=>{Promise.resolve().then(r.bind(r,4087))},4277:(e,t,r)=>{Promise.resolve().then(r.bind(r,543))},3595:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},2827:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var o=r(326),s=r(7577),a=r(5047),n=r(1048),i=r(4432),l=r(772),d=r(381),c=r(9728),u=r(434);function m(){let[e,t]=(0,s.useState)(""),[r,m]=(0,s.useState)(""),[f,p]=(0,s.useState)(""),[h,g]=(0,s.useState)(!1),x=(0,a.useRouter)(),{setAuthenticated:v}=(0,c.O2)(),b=async t=>{t.preventDefault(),p(""),g(!0);try{let t=await fetch("/api/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})});if(t.ok){v(!0);let e=await t.json();localStorage.setItem("token",e.token),d.Am.success("Login"),x.push("/")}else{let e=await t.json();p(e.message||"Authentication failed"),d.Am.error(e.message||"Authentication failed")}}catch(e){v(!1),console.error("Error during sign-in:",e),p("Something went wrong"),d.Am.error("Something went wrong")}finally{g(!1)}};return(0,o.jsxs)("div",{className:"mx-auto mt-16 max-w-md",children:[o.jsx("h1",{className:"mb-4 text-2xl font-bold",children:"Login"}),(0,o.jsxs)("form",{onSubmit:b,children:[(0,o.jsxs)("div",{className:"mb-4",children:[o.jsx(n._,{htmlFor:"email",children:"Email"}),o.jsx(i.I,{id:"email",type:"email",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,o.jsxs)("div",{className:"mb-4",children:[o.jsx(n._,{htmlFor:"password",children:"Password"}),o.jsx(i.I,{id:"password",type:"password",value:r,onChange:e=>m(e.target.value),required:!0})]}),(0,o.jsxs)("div",{className:"mb-[20px] flex gap-[2px] text-[12px]",children:[o.jsx("span",{children:"Ainda n\xe3o possui uma conta?"}),o.jsx(u.default,{href:"/sign-up",className:"text-blue-400 hover:brightness-75",children:"Registrar"})]}),f&&o.jsx("p",{className:"text-red-500",children:f}),o.jsx(l.z,{type:"submit",disabled:h,children:h?"Loading...":"Entrar"})]})]})}},799:(e,t,r)=>{"use strict";r.d(t,{P3:()=>n,Rt:()=>a});var o=r(1190);let s="https://app.grupoerre.pt:5258",a=async(e,t,r,a)=>{let i=localStorage.getItem("token"),l=await fetch(`${s}/api/occurrences/edit/${r}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({name:e.name,email:e.email,comments:e.comments,imgUrl:e.imgUrl,status:t})}),d=await l.json();"Occurence successfully edited"===d.message&&o.Am.success("Ocorr\xeancia editada com sucesso"),n(a),console.log("Editar ocurrence",d)},n=async e=>{let t=localStorage.getItem("token"),r=await fetch(`${s}/api/occurrences/get-all`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}),o=await r.json();e(o.occurences),console.log("Occurrences fetched",o)}},9728:(e,t,r)=>{"use strict";r.d(t,{Ho:()=>c,O2:()=>u});var o=r(326),s=r(5047),a=r(7577),n=r(8201);let i=e=>{try{let t=(0,n.o)(e),r=Math.floor(Date.now()/1e3);return t.exp>r}catch(e){return!1}},l=e=>{try{let t=(0,n.o)(e),r=Math.floor(Date.now()/1e3);if(t.exp>r)return{token:t,refreshToken:e}}catch(e){console.error("Failed to decode refresh token:",e)}return null},d=(0,a.createContext)(void 0),c=({children:e})=>{let[t,r]=(0,a.useState)(!0),[c,u]=(0,a.useState)(!1),[m,f]=(0,a.useState)(null),[p,h]=(0,a.useState)(),[g,x]=(0,a.useState)({userGroup:""}),[v,b]=(0,a.useState)({latitude:0,longitude:0}),[y,j]=(0,a.useState)(!1),[w,P]=(0,a.useState)(),[S,k]=(0,a.useState)(),_=(0,s.useRouter)();return(0,a.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("refreshToken");(async()=>{if(e&&i(e))f(e),x((0,n.o)(e)),u(!0);else if(t){let e=l(t);e?(localStorage.setItem("token",e.token),localStorage.setItem("refreshToken",e.refreshToken),u(!0)):_.push("/sign-in")}else _.push("/sign-in");r(!1)})()},[]),o.jsx(d.Provider,{value:{authenticated:c,setAuthenticated:u,loading:t,setLoading:r,token:m,setToken:f,editors:p,setEditors:h,userType:g,setUserType:x,latLong:v,setLatLong:b,showDeleteModal:y,setShowDeleteModal:j,treeToDeleteId:w,setTreeToDeleteId:P,dataUpdated:S,setDataUpdated:k},children:e})},u=()=>{let e=(0,a.useContext)(d);if(!e)throw Error("useEvent must be used within an EventProvider");return e}},6768:(e,t,r)=>{"use strict";r.d(t,{db:()=>i,hp:()=>l});var o=r(326),s=r(7577),a=r(799);let n=(0,s.createContext)(void 0),i=({children:e})=>{let[t,r]=(0,s.useState)();return(0,s.useEffect)(()=>{(0,a.P3)(r)},[]),o.jsx(n.Provider,{value:{allOccurrences:t,setAllOccurrences:r},children:e})},l=()=>{let e=(0,s.useContext)(n);if(!e)throw Error("useEvent must be used within an EventProvider");return e}},4087:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var o=r(326),s=r(9749),a=r.n(s);r(7577);var n=r(4831),i=r(9728),l=r(6768);function d({children:e,...t}){return o.jsx(i.Ho,{children:o.jsx(l.db,{children:o.jsx(n.f,{...t,children:e})})})}var c=r(381);function u({children:e}){return o.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:o.jsx("body",{className:a().className,children:(0,o.jsxs)(d,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:[e,o.jsx(c.x7,{})]})})})}r(4047)},543:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Logo:()=>n});var o=r(326),s=r(6226),a=r(5047);function n(){let e=(0,a.useRouter)();return(0,o.jsxs)("div",{className:"flex h-20 min-h-20 cursor-pointer items-center gap-2 border-b px-6",onClick:()=>e.push("/"),children:[o.jsx("div",{className:"relative h-16 w-16",children:o.jsx(s.default,{src:"/lrb_black.svg",alt:"Logo",fill:!0,style:{objectFit:"contain"},priority:!0})}),o.jsx("h1",{className:"ml-4 text-xl font-bold",children:"Arvoredo"})]})}},772:(e,t,r)=>{"use strict";r.d(t,{z:()=>d});var o=r(326),s=r(7577),a=r(4214),n=r(8671),i=r(7863);let l=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...n},d)=>{let c=s?a.g7:"button";return o.jsx(c,{className:(0,i.cn)(l({variant:t,size:r,className:e})),ref:d,...n})});d.displayName="Button"},4432:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});var o=r(326),s=r(7577),a=r(7863);let n=s.forwardRef(({className:e,type:t,...r},s)=>o.jsx("input",{type:t,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));n.displayName="Input"},1048:(e,t,r)=>{"use strict";r.d(t,{_:()=>d});var o=r(326),s=r(7577),a=r(4478),n=r(8671),i=r(7863);let l=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef(({className:e,...t},r)=>o.jsx(a.f,{ref:r,className:(0,i.cn)(l(),e),...t}));d.displayName=a.f.displayName},7863:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var o=r(1135),s=r(1009);function a(...e){return(0,s.m6)((0,o.W)(e))}},611:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var o=r(9510),s=r(2631);function a({children:e}){return(0,o.jsxs)("div",{className:"flex h-full flex-col items-center justify-center",children:[o.jsx(s.T,{}),o.jsx("h1",{className:"my-2 text-3xl",children:"Dashboard"}),o.jsx("h2",{className:"mb-3 text-2xl",children:"LRB"}),e]})}},4539:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});var o=r(8570);let s=(0,o.createProxy)(String.raw`/home/bsilva/Code/arvoredo_arraiolos/arvoredo-arraiolos-backoffice/app/(auth)/(routes)/sign-in/[[...sign-in]]/page.tsx`),{__esModule:a,$$typeof:n}=s;s.default;let i=(0,o.createProxy)(String.raw`/home/bsilva/Code/arvoredo_arraiolos/arvoredo-arraiolos-backoffice/app/(auth)/(routes)/sign-in/[[...sign-in]]/page.tsx#default`)},1506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});var o=r(8570);let s=(0,o.createProxy)(String.raw`/home/bsilva/Code/arvoredo_arraiolos/arvoredo-arraiolos-backoffice/app/layout.tsx`),{__esModule:a,$$typeof:n}=s;s.default;let i=(0,o.createProxy)(String.raw`/home/bsilva/Code/arvoredo_arraiolos/arvoredo-arraiolos-backoffice/app/layout.tsx#default`)},2631:(e,t,r)=>{"use strict";r.d(t,{T:()=>i});var o=r(8570);let s=(0,o.createProxy)(String.raw`/home/bsilva/Code/arvoredo_arraiolos/arvoredo-arraiolos-backoffice/components/Logo/Logo.tsx`),{__esModule:a,$$typeof:n}=s;s.default;let i=(0,o.createProxy)(String.raw`/home/bsilva/Code/arvoredo_arraiolos/arvoredo-arraiolos-backoffice/components/Logo/Logo.tsx#Logo`)},5080:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var o=r(6621);let s=e=>[{type:"image/x-icon",sizes:"32x32",url:(0,o.fillMetadataSegment)(".",e.params,"icon.ico")+"?9c2b4fff6c2d4d8a"}]},4047:()=>{},4478:(e,t,r)=>{"use strict";r.d(t,{f:()=>i});var o=r(7577),s=r(5226),a=r(326),n=o.forwardRef((e,t)=>(0,a.jsx)(s.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var i=n}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[948,350,486],()=>r(5524));module.exports=o})();