(()=>{var e={};e.id=689,e.ids=[689],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},5574:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(6417),s(1521),s(5866),s(1506);var r=s(3191),t=s(8716),o=s(7922),i=s.n(o),l=s(5231),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);s.d(a,n);let c=["",{children:["(routes)",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6417)),"/home/bsilva/Code/arvoredo_arraiolos/arvoredo-arraiolos-backoffice/app/(routes)/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,1521)),"/home/bsilva/Code/arvoredo_arraiolos/arvoredo-arraiolos-backoffice/app/(routes)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,5080))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"/home/bsilva/Code/arvoredo_arraiolos/arvoredo-arraiolos-backoffice/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,5080))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/bsilva/Code/arvoredo_arraiolos/arvoredo-arraiolos-backoffice/app/(routes)/page.tsx"],u="/(routes)/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/(routes)/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8390:(e,a,s)=>{Promise.resolve().then(s.bind(s,162))},162:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>I});var r=s(326),t=s(2881);function o(e){let{icon:a}=e;return r.jsx("div",{className:"rounded-lg bg-slate-400/20 p-2",children:r.jsx(a,{strokeWidth:1,className:"h-4 w-4"})})}(0,t.Z)("Trees",[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]]),(0,t.Z)("Waypoints",[["circle",{cx:"12",cy:"4.5",r:"2.5",key:"r5ysbb"}],["path",{d:"m10.2 6.3-3.9 3.9",key:"1nzqf6"}],["circle",{cx:"4.5",cy:"12",r:"2.5",key:"jydg6v"}],["path",{d:"M7 12h10",key:"b7w52i"}],["circle",{cx:"19.5",cy:"12",r:"2.5",key:"1piiel"}],["path",{d:"m13.8 17.7 3.9-3.9",key:"1wyg1y"}],["circle",{cx:"12",cy:"19.5",r:"2.5",key:"13o1pw"}]]),(0,t.Z)("BookOpenCheck",[["path",{d:"M8 3H2v15h7c1.7 0 3 1.3 3 3V7c0-2.2-1.8-4-4-4Z",key:"1i8u0n"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V3h-6c-2.2 0-4 1.8-4 4v14c0-1.7 1.3-3 3-3h7v-2.3",key:"jb5l51"}]]);/**
 * @license lucide-react v0.397.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,t.Z)("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);var l=s(7577),n=s(6508),c=s(1798),d=s(2969),u=s(5919);/**
 * @license lucide-react v0.397.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,t.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var p=s(772),h=s(97),x=s(4432),g=s(5940),f=s(434),v=s(799);let j=e=>"pending"===e?"Pendente":"canceled"===e?"Cancelado":"approved"===e?"Resolvido":null,b=e=>"treeId"===e?"\xc1rvore ID":"comments"===e?"Coment\xe1rios":"createdAt"===e?"Data de Cria\xe7\xe3o":"updatedAt"===e?"Data de Atualiza\xe7\xe3o":e;function _({allOccurrences:e,setAllOccurrences:a}){let s=[{id:"select",enableSorting:!1,enableHiding:!1},{accessorKey:"status",header:"Status",cell:({row:e})=>r.jsx("div",{className:"capitalize",children:j(e.getValue("status"))})},{accessorKey:"treeId",header:({column:e})=>(0,r.jsxs)(p.z,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["\xc1rvore Id",r.jsx(d.Z,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>r.jsx("div",{className:"lowercase",children:e.getValue("treeId")})},{accessorKey:"email",header:({column:e})=>(0,r.jsxs)(p.z,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["Email",r.jsx(d.Z,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>r.jsx("div",{className:"lowercase",children:e.getValue("email")})},{accessorKey:"comments",header:({column:e})=>(0,r.jsxs)(p.z,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["Comments",r.jsx(d.Z,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>r.jsx("div",{className:"lowercase",children:e.getValue("comments")})},{accessorKey:"createdAt",header:({column:e})=>(0,r.jsxs)(p.z,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["Data de Cria\xe7\xe3o",r.jsx(d.Z,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>r.jsx("div",{className:"flex items-center justify-center lowercase",children:new Date(e.getValue("createdAt")).toLocaleDateString()})},{accessorKey:"updatedAt",header:({column:e})=>(0,r.jsxs)(p.z,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["Data de Atualiza\xe7\xe3o",r.jsx(d.Z,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>r.jsx("div",{className:"flex items-center justify-center lowercase",children:new Date(e.getValue("updatedAt")).toLocaleDateString()})},{id:"actions",header:({column:e})=>r.jsx("span",{children:"A\xe7\xf5es"}),enableHiding:!1,cell:({row:e})=>{let s=e.original,t=e.original;return(0,r.jsxs)(h.h_,{children:[r.jsx(h.$F,{asChild:!0,children:(0,r.jsxs)(p.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[r.jsx("span",{className:"sr-only",children:"Abrir Menu"}),r.jsx(u.Z,{className:"h-4 w-4"})]})}),(0,r.jsxs)(h.AW,{align:"end",children:[r.jsx(h.Ju,{children:"A\xe7\xf5es"}),r.jsx(h.Xi,{className:"hover:cursor-pointer",onClick:()=>navigator.clipboard.writeText(s.treeId),children:"Copiar ID"}),r.jsx(h.VD,{}),r.jsx(h.Xi,{children:r.jsx(f.default,{href:`/arvore/${s.treeId}`,children:"Ver \xc1rvore"})}),r.jsx(h.Xi,{children:r.jsx(p.z,{variant:"destructive",onClick:()=>{(0,v.Rt)(t,"canceled",t._id,a)},children:"Cancelar Ocorr\xeancia"})}),r.jsx(h.Xi,{children:r.jsx(p.z,{onClick:()=>(0,v.Rt)(t,"approved",t._id,a),children:"Resolver Ocorr\xeancia"})})]})]})}}],[t,o]=l.useState([]),[i,_]=l.useState([]),[y,N]=l.useState({}),[w,C]=l.useState({}),k=l.useMemo(()=>e,[e]),P=(0,n.b7)({data:k??[],columns:s,onSortingChange:o,onColumnFiltersChange:_,getCoreRowModel:(0,c.sC)(),getPaginationRowModel:(0,c.G_)(),getSortedRowModel:(0,c.tj)(),getFilteredRowModel:(0,c.vL)(),onColumnVisibilityChange:N,onRowSelectionChange:C,state:{sorting:t,columnFilters:i,columnVisibility:y,rowSelection:w}});return void 0===e?r.jsx("div",{className:"flex items-center justify-center",children:r.jsx("div",{className:"loader"})}):(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"flex items-center py-4",children:[r.jsx(x.I,{placeholder:"Procurar...",value:P.getColumn("_id")?.getFilterValue()??"",onChange:e=>P.getColumn("_id")?.setFilterValue(e.target.value),className:"max-w-sm"}),(0,r.jsxs)(h.h_,{children:[r.jsx(h.$F,{asChild:!0,children:(0,r.jsxs)(p.z,{variant:"outline",className:"ml-auto",children:["Filtro ",r.jsx(m,{className:"ml-2 h-4 w-4"})]})}),r.jsx(h.AW,{align:"end",children:P.getAllColumns().filter(e=>e.getCanHide()).map(e=>r.jsx(h.bO,{className:"capitalize",checked:e.getIsVisible(),onCheckedChange:a=>e.toggleVisibility(!!a),children:b(e.id)},e.id))})]})]}),r.jsx("div",{className:"rounded-md border",children:(0,r.jsxs)(g.iA,{children:[r.jsx(g.xD,{children:P.getHeaderGroups().map(e=>r.jsx(g.SC,{children:e.headers.map(e=>r.jsx(g.ss,{children:e.isPlaceholder?null:(0,n.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),r.jsx(g.RM,{children:P.getRowModel().rows?.length?P.getRowModel().rows.map(e=>r.jsx(g.SC,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>r.jsx(g.pj,{children:(0,n.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):r.jsx(g.SC,{children:r.jsx(g.pj,{colSpan:s.length,className:"h-24 text-center",children:"No results."})})})]})}),r.jsx("div",{className:"flex items-center justify-end space-x-2 py-4",children:(0,r.jsxs)("div",{className:"space-x-2",children:[r.jsx(p.z,{variant:"outline",size:"sm",onClick:()=>P.previousPage(),disabled:!P.getCanPreviousPage(),children:"Anterior"}),r.jsx(p.z,{variant:"outline",size:"sm",onClick:()=>P.nextPage(),disabled:!P.getCanNextPage(),children:"Pr\xf3ximo"})]})})]})}var y=s(6768);function N(){let{allOccurrences:e,setAllOccurrences:a}=(0,y.hp)();return(0,r.jsxs)("div",{className:"rounded-lg bg-background p-5 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[r.jsx(o,{icon:i}),r.jsx("p",{className:"text-xl",children:"Ocorr\xeancias"})]}),r.jsx("div",{children:r.jsx(_,{allOccurrences:e,setAllOccurrences:a})})]})}var w=s(4326),C=s(9728);/**
 * @license lucide-react v0.397.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let k=(0,t.Z)("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);var P=s(4723);function A(){let{token:e,setEditors:a,userType:s,editors:t}=(0,C.O2)(),{handleSubmit:i,register:l,reset:n}=(0,P.cI)({}),c=e=>{(0,w.jc)(e,"user"),(0,w.sD)(a)};return(0,r.jsxs)("div",{className:"flex flex-col rounded-lg bg-background p-5 shadow-sm",children:[r.jsx("div",{className:"items-centerflex-col flex gap-x-2",children:(0,r.jsxs)("div",{className:"flex gap-[5px]",children:[r.jsx(o,{icon:k}),r.jsx("p",{className:"text-xl",children:"Editores"})]})}),s&&"administrator"===s.userGroup?(0,r.jsxs)("form",{className:"mt-[10px] flex items-center gap-[10px]",onSubmit:i(e=>{n(),(0,w.jc)(e.editor,"editor"),(0,w.sD)(a)}),children:[r.jsx("input",{...l("editor"),name:"editor",className:"mt-1 block w-[70%] rounded-sm border border-slate-300 bg-white px-3 py-2 text-sm placeholder-slate-400 shadow-sm focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"}),r.jsx("button",{type:"submit",className:"h-[40px] w-[150px] rounded bg-gray-700 text-sm font-semibold text-white hover:brightness-50",children:"Adicionar editor +"})]}):null,r.jsx("h3",{className:"mt-[20px] font-semibold",children:"Editores"}),t?.map((e,a)=>r.jsxs("div",{className:"inline-block flex items-center justify-between bg-gray-200 px-[10px]",children:[r.jsx("p",{className:"mt-[5px] p-[10px]",children:e.email}),r.jsx("button",{className:"h-[35px] w-[100px] rounded bg-red-500 text-sm font-semibold text-white hover:brightness-50",onClick:()=>c(e.email),children:"Remover"})]},e.email))]})}var S=s(1190);function I(){let{allOccurrences:e,setAllOccurrences:a}=(0,y.hp)();return(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"mb-4 text-2xl",children:"Dashboard"}),(0,r.jsxs)("div",{className:"mt-12 grid grid-cols-1 md:gap-x-10 xl:grid-cols-2",children:[r.jsx(N,{}),r.jsx(A,{}),r.jsx(S.ToastContainer,{})]})]})}s(5996)},4326:(e,a,s)=>{"use strict";s.d(a,{CO:()=>c,Xw:()=>n,f1:()=>l,jc:()=>i,sD:()=>o});var r=s(381);let t="https://lrb-app.grupoerre.pt:3011",o=async e=>{let a=localStorage.getItem("token"),s=await fetch(`${t}/users/by-user-group/editor`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}}),r=await s.json();e(r?.users)},i=async(e,a)=>{let s=localStorage.getItem("token"),o=await fetch(`${t}/auth/update-user-group/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({userGroup:a})});await o.json()&&r.ZP.success("Novo(a) editor(a) adicionado(a)")},l=async e=>{let a=localStorage.getItem("token"),s=await fetch(`${t}/api/tree/create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({Data:e.Data,Dicofre:e.Dicofre,Localizacao:e.Localizacao,Especie:e.Especie,Nomecomum:e.Nomecomum,Estado_fit:e.Estado_fit,Esdado_cal:e.Esdado_cal,Ava_Risco:e.Ava_Risco,Propo_Inte:e.Propo_Inte,Obser:e.Obser,GlobalID:e.GlobalID,raz_calssifica:e.raz_calssifica,agen_bioticos:e.agen_bioticos,Orgaos_afetados:e.Orgaos_afetados,Grau_de_desfolha:e.Grau_de_desfolha,Sintomas_sinais_desfolhadores:e.Sintomas_sinais_desfolhadores,Grau_de_descoloracao_da_copa:e.Grau_de_descoloracao_da_copa,Deformacao_dos_tecidos:e.Deformacao_dos_tecidos,Alteracao_da_estrutura:e.Alteracao_da_estrutura,Supressao_parcial_dos_orgaos:e.Supressao_parcial_dos_orgaos,Orificios_perfuracoes:e.Orificios_perfuracoes,galerias:e.galerias,necroses:e.necroses,serrim:e.serrim,exsudacao:e.exsudacao,novelos_fibra:e.novelos_fibra,Forma_caldeira:e.Forma_caldeira,Altura_v2:e.Altura_v2,capv2:e.capv2,DAP_v2:e.DAP_v2,idade_apro_v2:e.idade_apro_v2,Especie_Val:e.Especie_Val,Outro_Nome_Comum:e.Outro_Nome_Comum,Outra_Especie:e.Outra_Especie,Codigo:e.Codigo,Outra_Tip_Int:e.Outra_Tip_Int,grupos:e.grupos,POINT_X:e.POINT_X,POINT_Y:e.POINT_Y,POINT_Z:e.POINT_Z})});await s.json()&&r.ZP.success("Arvore criada com sucesso")},n=async(e,a)=>{let s=localStorage.getItem("token"),o=await fetch(`${t}/api/tree/edit/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({tree:e})});await o.json()&&r.ZP.success("Arvore editada com sucesso")},c=async e=>{let a=localStorage.getItem("token"),s=await fetch(`${t}/api/tree/delete/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});await s.json()&&r.ZP.success("Arvore deletada com sucesso")}},4432:(e,a,s)=>{"use strict";s.d(a,{I:()=>i});var r=s(326),t=s(7577),o=s(7863);let i=t.forwardRef(({className:e,type:a,...s},t)=>r.jsx("input",{type:a,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));i.displayName="Input"},5940:(e,a,s)=>{"use strict";s.d(a,{RM:()=>n,SC:()=>c,iA:()=>i,pj:()=>u,ss:()=>d,xD:()=>l});var r=s(326),t=s(7577),o=s(7863);let i=t.forwardRef(({className:e,...a},s)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:s,className:(0,o.cn)("w-full caption-bottom text-sm",e),...a})}));i.displayName="Table";let l=t.forwardRef(({className:e,...a},s)=>r.jsx("thead",{ref:s,className:(0,o.cn)("[&_tr]:border-b",e),...a}));l.displayName="TableHeader";let n=t.forwardRef(({className:e,...a},s)=>r.jsx("tbody",{ref:s,className:(0,o.cn)("[&_tr:last-child]:border-0",e),...a}));n.displayName="TableBody",t.forwardRef(({className:e,...a},s)=>r.jsx("tfoot",{ref:s,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...a})).displayName="TableFooter";let c=t.forwardRef(({className:e,...a},s)=>r.jsx("tr",{ref:s,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...a}));c.displayName="TableRow";let d=t.forwardRef(({className:e,...a},s)=>r.jsx("th",{ref:s,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...a}));d.displayName="TableHead";let u=t.forwardRef(({className:e,...a},s)=>r.jsx("td",{ref:s,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...a}));u.displayName="TableCell",t.forwardRef(({className:e,...a},s)=>r.jsx("caption",{ref:s,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",e),...a})).displayName="TableCaption"},6417:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$typeof:()=>i,__esModule:()=>o,default:()=>l});var r=s(8570);let t=(0,r.createProxy)(String.raw`/home/bsilva/Code/arvoredo_arraiolos/arvoredo-arraiolos-backoffice/app/(routes)/page.tsx`),{__esModule:o,$$typeof:i}=t;t.default;let l=(0,r.createProxy)(String.raw`/home/bsilva/Code/arvoredo_arraiolos/arvoredo-arraiolos-backoffice/app/(routes)/page.tsx#default`)},5996:()=>{}};var a=require("../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),r=a.X(0,[948,350,486,395,723,887,177],()=>s(5574));module.exports=r})();